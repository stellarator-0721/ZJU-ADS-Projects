# 迷你搜索引擎 (Mini Search Engine)

## 项目简介

这是一个用 C 语言实现的简单搜索引擎。它能够索引指定目录下的文本文档集合，并允许用户通过命令行进行交互式查询。该引擎的核心是倒排索引 (Inverted Index)，并使用了词干提取 (Stemming) 和停用词 (Stopwords) 过滤来提高搜索质量。

项目还包含一个独立的工具，可以根据语料库的词频分析自动生成一个自定义的停用词列表。

## 主要功能

* **倒排索引**: 基于哈希表实现，快速将词项 (term) 映射到包含它的文档列表。
* **自动停用词生成**: 通过分析语料库的词频，结合标准停用词列表，生成一个项目专属的停用词文件。
* **词干提取**: 使用 Porter Stemmer 算法将单词还原为词干，提高搜索召回率 (例如 "running", "runs" 都会被处理为 "run")。
* **交互式查询**: 支持单次、多次查询，并可根据词频筛选结果。
* **结果排序**:
    * 支持按原始词频 (Raw Frequency) 排序。
    * 支持按标准化词频 (Normalized Frequency) 排序，以消除文档长度的影响。
* **多词查询**: 对于包含多个词的查询，同时返回 AND (必须包含所有词) 和 OR (包含任意一个词) 的查询结果。

## 先决条件

1.  一个 C 语言编译器工具链，例如适用于 Windows 的 **MinGW**。
2.  `mingw32-make` 构建工具。

## 目录结构

为了让程序正确运行，请确保您的目录结构如下：
```

/your_project_root
|
|-- data/
|   |-- shakespeare_texts/
|   |   |-- a_midsummer_nights_dream.txt
|   |   |-- hamlet.txt
|   |   |-- (其他txt文档...)
|   |
|   |-- stopwords_standard.txt  <-- 用于生成停用词的标准列表
|   |-- stopwords.txt           <-- 项目已附带此文件，但也可重新生成
|
|-- lib/
|   |-- stmr.c
|   |-- stmr.h
|
|-- main.c
|-- query.c
|-- (其他 .c 和 .h 文件...)
|-- Makefile
```

## 如何编译与运行

### 第一步：编译所有程序

在项目根目录下，打开终端并运行一个命令即可编译所有可执行文件 (`main.exe` 和 `get_stopwords.exe`),但是我们已经上传了编译完成的版本：

```bash
mingw32-make
```
### 第二步：运行
(可选) 生成停用词列表
主搜索引擎依赖于 data/stopwords.txt 文件。为了方便使用，这个文件已经包含在项目中。如果您想亲自体验生成过程，或者修改了语料库，可以先手动删除 data/stopwords.txt，然后运行停用词生成程序：

Bash
```
.\get_stopwords.exe
```

运行主搜索引擎
确保 data/stopwords.txt 文件存在后，运行主程序：

Bash
```
./mini_search_engine.exe
```

程序启动后，会首先加载文件并构建倒排索引。完成后，您会看到一个查询提示符 >，表示可以开始输入查询了。

使用方法
在 > 提示符后，您可以输入以下格式的查询：

1. 基本查询
查询单个词在哪些文档中出现。

> noble
2. 带词频阈值的查询
查询一个词，并且只显示该词在文档中出现次数大于或等于指定阈值的结果。格式为 单词 : 阈值。

> noble : 10
3. 使用标准化词频的查询
使用标准化词频（词频 / 文档总词数）进行排序和筛选。阈值的单位是 "每10000个单词出现的次数"。格式为 单词 : 阈值 norm。

> noble : 3 norm
4. 多词查询
输入多个单词。程序会分别给出满足 AND 条件（包含所有单词）和 OR 条件（包含任一单词）的文档列表。

> happy love
5. 退出程序
输入 exit 并按回车。

> exit
